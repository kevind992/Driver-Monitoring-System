{"version":3,"file":"plugin.js","sourceRoot":"","sources":["../../../src/@ionic-native/core/plugin.ts"],"names":[],"mappings":"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","sourcesContent":["import { getPlugin, getPromise, cordovaWarn, pluginWarn } from './util';\r\nimport { checkReady } from './bootstrap';\r\nimport { CordovaOptions } from './decorators';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/observable/fromEvent';\r\n\r\ncheckReady();\r\n\r\n// declare const window;\r\n// declare var Promise;\r\n\r\nexport const ERR_CORDOVA_NOT_AVAILABLE = { error: 'cordova_not_available' };\r\nexport const ERR_PLUGIN_NOT_INSTALLED = { error: 'plugin_not_installed' };\r\n\r\n\r\n/**\r\n * Checks if plugin/cordova is available\r\n * @return {boolean | { error: string } }\r\n * @private\r\n */\r\nexport function checkAvailability(pluginRef: string, methodName?: string, pluginName?: string): boolean | { error: string };\r\nexport function checkAvailability(pluginObj: any, methodName?: string, pluginName?: string): boolean | { error: string };\r\nexport function checkAvailability(plugin: any, methodName?: string, pluginName?: string): boolean | { error: string } {\r\n\r\n  let pluginRef, pluginInstance, pluginPackage;\r\n\r\n  if (typeof plugin === 'string') {\r\n    pluginRef = plugin;\r\n  } else {\r\n    pluginRef = plugin.constructor.getPluginRef();\r\n    pluginName = plugin.constructor.getPluginName();\r\n    pluginPackage = plugin.constructor.getPluginInstallName();\r\n  }\r\n\r\n  pluginInstance = getPlugin(pluginRef);\r\n\r\n  if (!pluginInstance || (!!methodName && typeof pluginInstance[methodName] === 'undefined')) {\r\n    if (!window.cordova) {\r\n      cordovaWarn(pluginName, methodName);\r\n      return ERR_CORDOVA_NOT_AVAILABLE;\r\n    }\r\n\r\n    pluginWarn(pluginName, pluginPackage, methodName);\r\n    return ERR_PLUGIN_NOT_INSTALLED;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Checks if _objectInstance exists and has the method/property\r\n * @private\r\n */\r\nexport function instanceAvailability(pluginObj: any, methodName?: string): boolean {\r\n  return pluginObj._objectInstance && (!methodName || typeof pluginObj._objectInstance[methodName] !== 'undefined');\r\n}\r\n\r\nfunction setIndex(args: any[], opts: any = {}, resolve?: Function, reject?: Function): any {\r\n  // ignore resolve and reject in case sync\r\n  if (opts.sync) {\r\n    return args;\r\n  }\r\n\r\n  // If the plugin method expects myMethod(success, err, options)\r\n  if (opts.callbackOrder === 'reverse') {\r\n    // Get those arguments in the order [resolve, reject, ...restOfArgs]\r\n    args.unshift(reject);\r\n    args.unshift(resolve);\r\n  } else if (opts.callbackStyle === 'node') {\r\n    args.push((err: any, result: any) => {\r\n      if (err) {\r\n        reject(err);\r\n      } else {\r\n        resolve(result);\r\n      }\r\n    });\r\n  } else if (opts.callbackStyle === 'object' && opts.successName && opts.errorName) {\r\n    let obj: any = {};\r\n    obj[opts.successName] = resolve;\r\n    obj[opts.errorName] = reject;\r\n    args.push(obj);\r\n  } else if (typeof opts.successIndex !== 'undefined' || typeof opts.errorIndex !== 'undefined') {\r\n    const setSuccessIndex = () => {\r\n      // If we've specified a success/error index\r\n      if (opts.successIndex > args.length) {\r\n        args[opts.successIndex] = resolve;\r\n      } else {\r\n        args.splice(opts.successIndex, 0, resolve);\r\n      }\r\n    };\r\n\r\n    const setErrorIndex = () => {\r\n      // We don't want that the reject cb gets spliced into the position of an optional argument that has not been defined and thus causing non expected behaviour.\r\n      if (opts.errorIndex > args.length) {\r\n        args[opts.errorIndex] = reject; // insert the reject fn at the correct specific index\r\n      } else {\r\n        args.splice(opts.errorIndex, 0, reject); // otherwise just splice it into the array\r\n      }\r\n    };\r\n\r\n    if (opts.successIndex > opts.errorIndex) {\r\n      setErrorIndex();\r\n      setSuccessIndex();\r\n    } else {\r\n      setSuccessIndex();\r\n      setErrorIndex();\r\n    }\r\n\r\n\r\n  } else {\r\n    // Otherwise, let's tack them on to the end of the argument list\r\n    // which is 90% of cases\r\n    args.push(resolve);\r\n    args.push(reject);\r\n  }\r\n  return args;\r\n}\r\n\r\nfunction callCordovaPlugin(pluginObj: any, methodName: string, args: any[], opts: any = {}, resolve?: Function, reject?: Function) {\r\n  // Try to figure out where the success/error callbacks need to be bound\r\n  // to our promise resolve/reject handlers.\r\n  args = setIndex(args, opts, resolve, reject);\r\n\r\n  const availabilityCheck = checkAvailability(pluginObj, methodName);\r\n\r\n  if (availabilityCheck === true) {\r\n    const pluginInstance = getPlugin(pluginObj.constructor.getPluginRef());\r\n    return pluginInstance[methodName].apply(pluginInstance, args);\r\n  } else {\r\n    return availabilityCheck;\r\n  }\r\n\r\n}\r\n\r\nfunction wrapPromise(pluginObj: any, methodName: string, args: any[], opts: any = {}) {\r\n  let pluginResult: any, rej: Function;\r\n  const p = getPromise((resolve: Function, reject: Function) => {\r\n    if (opts.destruct) {\r\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, (...args: any[]) => resolve(args), (...args: any[]) => reject(args));\r\n    } else {\r\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, resolve, reject);\r\n    }\r\n    rej = reject;\r\n  });\r\n  // Angular throws an error on unhandled rejection, but in this case we have already printed\r\n  // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\r\n  // to error\r\n  if (pluginResult && pluginResult.error) {\r\n    p.catch(() => { });\r\n    typeof rej === 'function' && rej(pluginResult.error);\r\n  }\r\n  return p;\r\n}\r\n\r\nfunction wrapOtherPromise(pluginObj: any, methodName: string, args: any[], opts: any = {}) {\r\n  return getPromise((resolve: Function, reject: Function) => {\r\n    const pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts);\r\n    if (pluginResult) {\r\n      if (pluginResult.error) {\r\n        reject(pluginResult.error);\r\n      } else if (pluginResult.then) {\r\n        pluginResult.then(resolve).catch(reject);\r\n      }\r\n    } else {\r\n      reject({ error: 'unexpected_error' });\r\n    }\r\n  });\r\n}\r\n\r\nfunction wrapObservable(pluginObj: any, methodName: string, args: any[], opts: any = {}) {\r\n  return new Observable(observer => {\r\n    let pluginResult;\r\n\r\n    if (opts.destruct) {\r\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, (...args: any[]) => observer.next(args), (...args: any[]) => observer.error(args));\r\n    } else {\r\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, observer.next.bind(observer), observer.error.bind(observer));\r\n    }\r\n\r\n    if (pluginResult && pluginResult.error) {\r\n      observer.error(pluginResult.error);\r\n      observer.complete();\r\n    }\r\n    return () => {\r\n      try {\r\n        if (opts.clearFunction) {\r\n          if (opts.clearWithArgs) {\r\n            return callCordovaPlugin(pluginObj, opts.clearFunction, args, opts, observer.next.bind(observer), observer.error.bind(observer));\r\n          }\r\n          return callCordovaPlugin(pluginObj, opts.clearFunction, []);\r\n        }\r\n      } catch (e) {\r\n        console.warn('Unable to clear the previous observable watch for', pluginObj.constructor.getPluginName(), methodName);\r\n        console.warn(e);\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\nfunction callInstance(pluginObj: any, methodName: string, args: any[], opts: any = {}, resolve?: Function, reject?: Function) {\r\n\r\n  args = setIndex(args, opts, resolve, reject);\r\n\r\n  if (instanceAvailability(pluginObj, methodName)) {\r\n    return pluginObj._objectInstance[methodName].apply(pluginObj._objectInstance, args);\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * Wrap the event with an observable\r\n * @private\r\n * @param event even name\r\n * @param element The element to attach the event listener to\r\n * @returns {Observable}\r\n */\r\nexport function wrapEventObservable(event: string, element: any = window): Observable<any> {\r\n  return Observable.fromEvent(element, event);\r\n}\r\n\r\n/**\r\n * Certain plugins expect the user to override methods in the plugin. For example,\r\n * window.cordova.plugins.backgroundMode.onactivate = function() { ... }.\r\n *\r\n * Unfortunately, this is brittle and would be better wrapped as an Observable. overrideFunction\r\n * does just this.\r\n * @private\r\n */\r\nexport function overrideFunction(pluginObj: any, methodName: string, args: any[], opts: any = {}): Observable<any> {\r\n  return new Observable(observer => {\r\n\r\n    const availabilityCheck = checkAvailability(pluginObj, methodName);\r\n\r\n    if (availabilityCheck === true) {\r\n      const pluginInstance = getPlugin(pluginObj.constructor.getPluginRef());\r\n      pluginInstance[methodName] = observer.next.bind(observer);\r\n      return () => pluginInstance[methodName] = () => { };\r\n    } else {\r\n      observer.error(availabilityCheck);\r\n      observer.complete();\r\n    }\r\n\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * @private\r\n */\r\nexport const wrap = function(pluginObj: any, methodName: string, opts: CordovaOptions = {}) {\r\n  return (...args: any[]) => {\r\n    if (opts.sync) {\r\n      // Sync doesn't wrap the plugin with a promise or observable, it returns the result as-is\r\n      return callCordovaPlugin(pluginObj, methodName, args, opts);\r\n    } else if (opts.observable) {\r\n      return wrapObservable(pluginObj, methodName, args, opts);\r\n    } else if (opts.eventObservable && opts.event) {\r\n      return wrapEventObservable(opts.event, opts.element);\r\n    } else if (opts.otherPromise) {\r\n      return wrapOtherPromise(pluginObj, methodName, args, opts);\r\n    } else {\r\n      return wrapPromise(pluginObj, methodName, args, opts);\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nexport function wrapInstance(pluginObj: any, methodName: string, opts: any = {}) {\r\n  return (...args: any[]) => {\r\n    if (opts.sync) {\r\n\r\n      return callInstance(pluginObj, methodName, args, opts);\r\n\r\n    } else if (opts.observable) {\r\n\r\n      return new Observable(observer => {\r\n\r\n        let pluginResult;\r\n\r\n        if (opts.destruct) {\r\n          pluginResult = callInstance(pluginObj, methodName, args, opts, (...args: any[]) => observer.next(args), (...args: any[]) => observer.error(args));\r\n        } else {\r\n          pluginResult = callInstance(pluginObj, methodName, args, opts, observer.next.bind(observer), observer.error.bind(observer));\r\n        }\r\n\r\n        if (pluginResult && pluginResult.error) {\r\n          observer.error(pluginResult.error);\r\n          observer.complete();\r\n        }\r\n\r\n        return () => {\r\n          try {\r\n            if (opts.clearWithArgs) {\r\n              return callInstance(pluginObj, opts.clearFunction, args, opts, observer.next.bind(observer), observer.error.bind(observer));\r\n            }\r\n            return callInstance(pluginObj, opts.clearFunction, []);\r\n          } catch (e) {\r\n            console.warn('Unable to clear the previous observable watch for', pluginObj.constructor.getPluginName(), methodName);\r\n            console.warn(e);\r\n          }\r\n        };\r\n      });\r\n\r\n    } else if (opts.otherPromise) {\r\n      return getPromise((resolve: Function, reject: Function) => {\r\n        let result;\r\n        if (opts.destruct) {\r\n          result = callInstance(pluginObj, methodName, args, opts, (...args: any[]) => resolve(args), (...args: any[]) => reject(args));\r\n        } else {\r\n          result = callInstance(pluginObj, methodName, args, opts, resolve, reject);\r\n        }\r\n        if (result && !!result.then) {\r\n          result.then(resolve, reject);\r\n        } else {\r\n          reject();\r\n        }\r\n      });\r\n\r\n    } else {\r\n      let pluginResult: any, rej: Function;\r\n      const p = getPromise((resolve: Function, reject: Function) => {\r\n        if (opts.destruct) {\r\n          pluginResult = callInstance(pluginObj, methodName, args, opts, (...args: any[]) => resolve(args), (...args: any[]) => reject(args));\r\n        } else {\r\n          pluginResult = callInstance(pluginObj, methodName, args, opts, resolve, reject);\r\n        }\r\n        rej = reject;\r\n      });\r\n      // Angular throws an error on unhandled rejection, but in this case we have already printed\r\n      // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\r\n      // to error\r\n      if (pluginResult && pluginResult.error) {\r\n        p.catch(() => { });\r\n        typeof rej === 'function' && rej(pluginResult.error);\r\n      }\r\n      return p;\r\n\r\n\r\n    }\r\n  };\r\n}\r\n"]}